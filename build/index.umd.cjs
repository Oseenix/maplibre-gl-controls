(function(a,o){typeof exports=="object"&&typeof module<"u"?module.exports=o():typeof define=="function"&&define.amd?define(o):(a=typeof globalThis<"u"?globalThis:a||self,a.TemporalControl=o())})(this,function(){"use strict";var H=Object.defineProperty;var S=(a,o,u)=>o in a?H(a,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[o]=u;var s=(a,o,u)=>S(a,typeof o!="symbol"?o+"":o,u);const a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>pause</title><path d="M14,19H18V5H14M6,19H10V5H6V19Z" /></svg>',o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>play</title><path d="M8,5.14V19.14L19,12.14L8,5.14Z" /></svg>',u='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>reload</title><path d="M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z" /></svg>',M='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>skip-backward</title><path d="M20,5V19L13,12M6,5V19H4V5M13,5V19L6,12" /></svg>',V='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>skip-forward</title><path d="M4,5V19L11,12M18,5V19H20V5M11,5V19L18,12" /></svg>',x="rgb(204, 204, 204)",y=f=>{const t=document.createElement("img");return t.src=`data:image/svg+xml,${encodeURIComponent(f)}`,t.style.width="24px",t.style.height="24px",t};let C;const T=({length:f,interval:t,onSliderValueChange:p})=>{const i=document.createElement("div");i.classList.add("maplibregl-ctrl"),i.classList.add("maplibregl-ctrl-group"),i.style.width="240px",i.style.height="84px",i.style.backgroundColor="#fff",i.style.textAlign="center";const l=document.createElement("div");l.innerHTML="<br />",l.style.marginTop="4px",i.appendChild(l);const e=document.createElement("input");e.type="range",e.value="0",e.min="0",e.max=String(f-1),e.addEventListener("input",()=>{p()}),e.style.width="80%",e.style.margin="4px 0",i.appendChild(e);const n=document.createElement("div");n.style.display="flex",n.style.justifyContent="center",n.style.margin="4px 0 0 0";const m=N=>{r.style.backgroundColor=N?x:""},w=()=>r.style.backgroundColor===x,r=document.createElement("button");r.appendChild(y(u)),r.style.border="0",r.style.borderRadius="0",r.style.marginRight="16px",r.style.height="24px",r.style.borderRadius="4px",r.onclick=()=>m(!w()),n.appendChild(r);const v=()=>(e.value=String(Math.max(0,Number(e.value)-1)),p(),Number(e.min)<Number(e.value)),b=()=>{if(r.style.backgroundColor!==""&&Number(e.value)==Number(e.max))for(;v(););else e.value=String(Math.min(Number(e.max),Number(e.value)+1));return p(),Number(e.value)<Number(e.max)},h=document.createElement("button");h.appendChild(y(M)),h.onclick=v,h.style.border="0",h.style.height="24px",h.style.borderRadius="4px";const L=()=>{C!==void 0&&(clearInterval(C),C=void 0,d.onclick=null,c.style.backgroundColor="")},d=document.createElement("button");d.appendChild(y(a)),d.style.border="0",d.style.height="24px",d.style.borderRadius="4px",d.onclick=L;const E=()=>c.style.backgroundColor===x,k=()=>{E()||(c.style.backgroundColor=x,C=setInterval(()=>{b()},t))},c=document.createElement("button");c.appendChild(y(o)),c.style.border="0",c.style.height="24px",c.style.borderRadius="4px",c.onclick=k;const g=document.createElement("button");return g.appendChild(y(V)),g.style.border="0",g.style.height="24px",g.style.borderRadius="4px",g.onclick=b,n.appendChild(h),n.appendChild(d),n.appendChild(c),n.appendChild(g),i.appendChild(n),{container:i,titleDiv:l,slider:e,increment:b,decrement:v,isPlaying:E,play:k,pause:L,isLoopEnabled:w,setLoopEnabled:m}};class B{constructor(t,p={}){s(this,"map");s(this,"options");s(this,"container");s(this,"containerTitle");s(this,"temporalSlider");s(this,"temporalFrames");s(this,"next");s(this,"prev");s(this,"play");s(this,"pause");s(this,"isPlaying");s(this,"isLoopEnabled");s(this,"setLoopEnabled");s(this,"goto");this.temporalFrames=t,this.options=p;const i={length:this.temporalFrames.length,interval:this.options.interval||500,onSliderValueChange:()=>this.refresh()},{container:l,titleDiv:e,slider:n,increment:m,decrement:w,play:r,pause:v,isPlaying:b,isLoopEnabled:h,setLoopEnabled:L}=T(i);this.container=l,this.containerTitle=e,this.temporalSlider=n,this.next=m,this.prev=w,this.play=r,this.pause=v,this.isPlaying=b,this.isLoopEnabled=h,this.setLoopEnabled=L,this.goto=d=>{n.value=String(Math.min(this.temporalFrames.length-1,Math.max(0,d))),this.refresh()}}onAdd(t){return this.map=t,t.getContainer().appendChild(this.container),this.map.once("styledata",()=>{this.refresh()}),this.container}onRemove(){var t;(t=this.container.parentNode)==null||t.removeChild(this.container),this.map=void 0}getDefaultPosition(){return"bottom-left"}refresh(){const t=Number(this.temporalSlider.value);this.containerTitle.innerHTML=this.temporalFrames[t].title;const p=this.temporalFrames[t].layers.map(i=>i.id);this.temporalFrames.forEach(i=>{i.layers.forEach(l=>this.setVisible(l,p.includes(l.id)))})}setVisible(t,p=!0){var i,l,e,n;if(t.type==="raster"||t.type==="fill"||t.type==="circle"||t.type==="line"){t.type==="raster"&&((i=this.map)==null||i.setPaintProperty(t.id,`${t.type}-opacity-transition`,{duration:0}));let m;p?m=((l=t.paint)==null?void 0:l[`${t.type}-opacity`])||1:m=this.options.performance?1e-21:0,(e=this.map)==null||e.setPaintProperty(t.id,`${t.type}-opacity`,m)}else(n=this.map)==null||n.setLayoutProperty(t.id,"visibility",p?"visible":"none")}}return B});
//# sourceMappingURL=index.umd.cjs.map
