import{m as d}from"./maplibre-gl-BYDgI10c.js";import{T as h}from"./temparal-D2nodgFt.js";import{C as m,M as g}from"./msg-CgNqML-X.js";import{T as u}from"./switch-DVd4lny_.js";const w=["201901","201902","201903","201904","201905","201906","201907","201908","201909","201910","201911","201912","202001","202002","202003","202004","202005","202006","202007","202008","202009","202010","202011","202012"],v=e=>{const t=e+"d1t0";return{"fill-color":["interpolate",["linear"],["get",t],0,"#ffffff",100,"#0000ff",5e3,"#00ff00",1e4,"#ffff00",3e4,"#ff0000",1e5,"#990000"],"fill-opacity":["interpolate",["linear"],["get",t],0,0,100,.1,5e3,.2,1e4,.3,3e4,.4,1e5,.4]}},c=w.map(e=>({id:e,type:"fill",source:"mesh","source-layer":"meshesgeojsonl",paint:v(e)})),M={version:8,sources:{OSM:{type:"raster",tiles:["https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg"],tileSize:256,attribution:'<a href="https://maps.gsi.go.jp/development/ichiran.html">地理院タイル</a>'},mesh:{type:"vector",tiles:["https://kanahiro.github.io/temporal-pop-mesh/meshes/{z}/{x}/{y}.pbf"],attribution:"<a href='https://www.geospatial.jp/ckan/dataset/mlit-1km-fromto' target='_blank'>全国の人流オープンデータ(平日昼間人口)</a> | <a href='https://twitter.com/kanahiro_iguchi' target='_blank'>@kanahiro_iguchi</a>",minzoom:9,maxzoom:9}},layers:[{id:"gsi",type:"raster",source:"OSM",minzoom:0,maxzoom:17},...c]},l=new d.Map({container:"map",style:M,center:[139.7,35.7],zoom:10,minZoom:4,maxZoom:12}),b=c.map(e=>({layers:[e],title:e.id})),y=new h(b,{interval:1e3,performance:!0});l.addControl(y);const k={"fill-opacity":1,"fill-color":["step",["get","speed"],"#0e00cc",.03125,"#0e66cc",.0625,"#0299ff",.09375,"#66ccff",.125,"#66e6ff",.15625,"#aaffee",.1875,"#00ffcb",.21875,"#00e6b3",.25,"#00cc88",.28125,"#a8ff04",.3125,"#feff32",.34375,"#9aff00",.375,"#508000",.40625,"#ffcc65",.4375,"#ff9966",.46875,"#ff6602",.5,"#d45a4a",.53125,"#f04020",.5625,"#a83838",.59375,"#ffccff",.625,"#ff99ff",.65625,"#ff66ff",.6875,"#cc02ff",.71875,"#9900cc",.75,"#402060",.78125,"#c0c0c0",.8125,"#999999",.84375,"#666666",.875,"#333333"]},x=new m(k,{title:"Wind",unit:"m/s",max:16,position:"top-left",tickMinStep:1});l.addControl(x);const z=new g({position:"bottom-right",innerHTML:"<strong>Local Model</strong>",style:{color:"#fff",fontSize:"14px",padding:"4px",display:"flex",justifyContent:"center",alignItems:"center"}});l.addControl(z);const C='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="white"  stroke-width="1"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-ripple"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7c3 -2 6 -2 9 0s6 2 9 0" /><path d="M3 17c3 -2 6 -2 9 0s6 2 9 0" /><path d="M3 12c3 -2 6 -2 9 0s6 2 9 0" /></svg>',j='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="white"  stroke-width="1"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-wind"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 8h8.5a2.5 2.5 0 1 0 -2.34 -3.24" /><path d="M3 12h15.5a2.5 2.5 0 1 1 -2.34 3.24" /><path d="M4 16h5.5a2.5 2.5 0 1 1 -2.34 3.24" /></svg>',n='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="white"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-maximize"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M16 4l4 0l0 4" /><path d="M14 10l6 -6" /><path d="M8 20l-4 0l0 -4" /><path d="M4 20l6 -6" /><path d="M16 20l4 0l0 -4" /><path d="M14 14l6 6" /><path d="M8 4l-4 0l0 4" /><path d="M4 4l6 6" /></svg>',p='<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="white"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-minimize"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 9l4 0l0 -4" /><path d="M3 3l6 6" /><path d="M5 15l4 0l0 4" /><path d="M3 21l6 -6" /><path d="M19 9l-4 0l0 -4" /><path d="M15 9l6 -6" /><path d="M19 15l-4 0l0 4" /><path d="M15 15l6 6" /></svg>';let o=!1;const i=e=>{o=!!document.fullscreenElement,e.updateButton("fullscreen",{svg:o?p:n,label:o?"Normal":"Fullscreen"})},B=new u({buttons:[{id:"wave",svg:C,label:"Wave Height",layerIds:["roads-layer","highways-layer"]},{id:"wind",svg:j,label:"Wind Speed",layerIds:["buildings-layer"]},{id:"fullscreen",svg:n,label:"Fullscreen",layerIds:["roads-layer","highways-layer"],repeat:!0,setup:(e,t)=>{document.addEventListener("fullscreenchange",()=>i(e))},cleanup:(e,t)=>{document.removeEventListener("fullscreenchange",()=>i(e))}}],defaultActive:"wave",position:"top-right",onToggle:(e,t,a)=>{const s=a.id,f=a.layerIds;if(console.log(`Switch to ${s} with layers:`,f),s==="fullscreen"){const r=t.getContainer();o?document.exitFullscreen&&(document.exitFullscreen(),o=!1,e.updateButton("fullscreen",{svg:n,label:"Fullscreen"})):r.requestFullscreen&&(r.requestFullscreen(),o=!0,e.updateButton("fullscreen",{svg:p,label:"Normal"}))}}});l.addControl(B);
